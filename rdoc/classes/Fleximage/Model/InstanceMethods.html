<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Fleximage::Model::InstanceMethods</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Fleximage::Model::InstanceMethods</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/fleximage/model_rb.html">
                lib/fleximage/model.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Provides methods that every model instance that acts_as_fleximage needs.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000131">bucket_name</a>&nbsp;&nbsp;
      <a href="#M000140">delete_image_file</a>&nbsp;&nbsp;
      <a href="#M000127">directory_path</a>&nbsp;&nbsp;
      <a href="#M000132">file_path</a>&nbsp;&nbsp;
      <a href="#M000137">has_image?</a>&nbsp;&nbsp;
      <a href="#M000138">has_saved_image?</a>&nbsp;&nbsp;
      <a href="#M000129">hostname</a>&nbsp;&nbsp;
      <a href="#M000133">image_file=</a>&nbsp;&nbsp;
      <a href="#M000135">image_file_temp=</a>&nbsp;&nbsp;
      <a href="#M000136">image_file_url</a>&nbsp;&nbsp;
      <a href="#M000134">image_file_url=</a>&nbsp;&nbsp;
      <a href="#M000139">operate</a>&nbsp;&nbsp;
      <a href="#M000130">port_string</a>&nbsp;&nbsp;
      <a href="#M000128">protocol</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000131" class="method-detail">
        <a name="M000131"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000131.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000131.html');return false;">
          <span class="method-name">bucket_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Last of the little helper methods that just translates your config options.
In this case, it returns the bucket name you&#8216;re wanting to use.
</p>
        </div>
      </div>

      <div id="method-M000140" class="method-detail">
        <a name="M000140"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000140.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000140.html');return false;">
          <span class="method-name">delete_image_file</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Delete the image file for this record. This is automatically ran after this
record gets destroyed, but you can call it manually if you want to remove
the image from the record.
</p>
        </div>
      </div>

      <div id="method-M000127" class="method-detail">
        <a name="M000127"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000127.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000127.html');return false;">
          <span class="method-name">directory_path</span><span class="method-args">(with_url=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the path to the master image file for this record. For Amazon S3
backend images, it will return the start of the url
</p>
<pre>
  @some_image.directory_path #=&gt; /var/www/myapp/uploaded_images
  @some_s3_image.directory_path #=&gt; http://s3.amazon.com/my_bucket/photo
</pre>
<p>
If this model has a created_at field, it will use a directory structure
based on the creation date, to prevent hitting the OS imposed limit on the
number files in a directory.
</p>
<pre>
  @some_image.directory_path #=&gt; /var/www/myapp/uploaded_images/2008/3/30
  @some_s3_image.directory_path #=&gt; http://s3.amazon.com/my_bucket/photo/2009/1/16
</pre>
        </div>
      </div>

      <div id="method-M000132" class="method-detail">
        <a name="M000132"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000132.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000132.html');return false;">
          <span class="method-name">file_path</span><span class="method-args">(with_url=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the path to the master image file for this record.
</p>
<pre>
  @some_image.file_path #=&gt; /var/www/myapp/uploaded_images/123.png
  @some_s3_image.file_path #=&gt; http://s3.amazon.com/my_bucket/photo/123.png
</pre>
        </div>
      </div>

      <div id="method-M000137" class="method-detail">
        <a name="M000137"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000137.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000137.html');return false;">
          <span class="method-name">has_image?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return true if this record has an image.
</p>
        </div>
      </div>

      <div id="method-M000138" class="method-detail">
        <a name="M000138"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000138.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000138.html');return false;">
          <span class="method-name">has_saved_image?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000129" class="method-detail">
        <a name="M000129"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000129.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000129.html');return false;">
          <span class="method-name">hostname</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="InstanceMethods.html#M000129">hostname</a> for Amazon
S3 calls.
</p>
        </div>
      </div>

      <div id="method-M000133" class="method-detail">
        <a name="M000133"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000133.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000133.html');return false;">
          <span class="method-name">image_file=</span><span class="method-args">(file)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the image file for this record to an uploaded file. This can be called
directly, or passively like from an ActiveRecord mass assignment.
</p>
<p>
<a href="../../Rails.html">Rails</a> will automatically call this method
for you, in most of the situations you would expect it to.
</p>
<pre>
  # via mass assignment, the most common form you'll probably use
  Photo.new(params[:photo])
  Photo.create(params[:photo])

  # via explicit assignment hash
  Photo.new(:image_file =&gt; params[:photo][:image_file])
  Photo.create(:image_file =&gt; params[:photo][:image_file])

  # Direct Assignment, usually not needed
  photo = Photo.new
  photo.image_file = params[:photo][:image_file]

  # via an association proxy
  p = Product.find(1)
  p.images.create(params[:photo])
</pre>
        </div>
      </div>

      <div id="method-M000135" class="method-detail">
        <a name="M000135"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000135.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000135.html');return false;">
          <span class="method-name">image_file_temp=</span><span class="method-args">(file_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the uploaded image to the name of a file in RAILS_ROOT/tmp that was
just uploaded. Use as a hidden field in your forms to keep an uploaded
image when validation fails and the form needs to be redisplayed
</p>
        </div>
      </div>

      <div id="method-M000136" class="method-detail">
        <a name="M000136"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000136.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000136.html');return false;">
          <span class="method-name">image_file_url</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return the @<a href="InstanceMethods.html#M000136">image_file_url</a> that
was previously assigned. This is not saved in the database, and only exists
to make forms happy.
</p>
        </div>
      </div>

      <div id="method-M000134" class="method-detail">
        <a name="M000134"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000134.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000134.html');return false;">
          <span class="method-name">image_file_url=</span><span class="method-args">(file_url)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Assign the image via a URL, which will make the plugin go and fetch the
image at the provided URL. The image will be stored locally as a master
image for that record from then on. This is intended to be used along side
the image upload to allow people the choice to upload from their local
machine, or pull from the internet.
</p>
<pre>
  @photo.image_file_url = 'http://foo.com/bar.jpg'
</pre>
        </div>
      </div>

      <div id="method-M000139" class="method-detail">
        <a name="M000139"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000139.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000139.html');return false;">
          <span class="method-name">operate</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Call from a .flexi view template. This enables the rendering of operators
so that you can transform your image. This is the method that is the
foundation of .flexi views. Every view should consist of image manipulation
code inside a block passed to this method.
</p>
<pre>
  # app/views/photos/thumb.jpg.flexi
  @photo.operate do |image|
    image.resize '320x240'
  end
</pre>
        </div>
      </div>

      <div id="method-M000130" class="method-detail">
        <a name="M000130"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000130.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000130.html');return false;">
          <span class="method-name">port_string</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the port string for Amazon S3 calls.
</p>
        </div>
      </div>

      <div id="method-M000128" class="method-detail">
        <a name="M000128"></a>

        <div class="method-heading">
          <a href="InstanceMethods.src/M000128.html" target="Code" class="method-signature"
            onclick="popupCode('InstanceMethods.src/M000128.html');return false;">
          <span class="method-name">protocol</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="InstanceMethods.html#M000128">protocol</a> for Amazon
S3 calls.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>